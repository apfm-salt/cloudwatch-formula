Linux:
  config_file: /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json
  config:
    agent:
    metrics:
      metrics_collected:
        cpu:
          resources: ["*"]
          measurement:
            - name: cpu_usage_idle
              rename: CPU_USAGE_IDLE
              unit: Percent
            - name: cpu_usage_nice
              unit: Percent
          totalcpu: false
          metrics_collection_interval: 10
        netstat:
          measurement:
            - tcp_established
            - tcp_syn_sent
            - tcp_close
          metrics_collection_interval: 60
        disk:
          measurement:
            - used_percent
          resources: ["*"]
          drop_device: true
        processes:
          measurement:
            - running
            - sleeping
            - dead
      append_dimensions:
        ImageId: "${aws:ImageId}"
        InstanceId: "${aws:InstanceId}"
        InstanceType: "${aws:InstanceType}"
        AutoScalingGroupName: "${aws:AutoScalingGroupName}"
      aggregation_dimensions: [["ImageId"], ["InstanceId", "InstanceType"], []]

Windows:
  config_file: $Env:ProgramData\Amazon\AmazonCloudWatchAgent\amazon-cloudwatch-agent.json
  config:
    Processor:
      measurement:
        - name: "% Idle Time"
          rename: "CPU_IDLE"
          unit: "Percent"
        - "% Interrupt Time"
        - "% User Time"
        - "% Processor Time"
      resources: ["*"]
      append_dimensions:
        d1: win_foo
        d2: win_bar
    LogicalDisk:
      measurement:
        - name: "% Idle Time"
          unit: "Percent"
        - name: "% Disk Read Time"
          rename: "DISK_READ"
        - "% Disk Write Time"
      resources: ["*"]
    Memory:
      metrics_collection_interval: 5
      measurement:
        - "Available Bytes"
        - "Cache Faults/sec"
        - "Page Faults/sec"
        - "Pages/sec"
    Network Interface:
      metrics_collection_interval: 5
      measurement:
        - "Bytes Received/sec"
        - "Bytes Sent/sec"
        - "Packets Received/sec"
        - "Packets Sent/sec"
      resources: ["*"]
    System:
      measurement:
        - "Context Switches/sec"
        - "System Calls/sec"
        - "Processor Queue Length"
    append_dimensions:
      ImageId: "${aws:ImageId}"
      InstanceId: "${aws:InstanceId}"
      InstanceType: "${aws:InstanceType}"
      AutoScalingGroupName: "${aws:AutoScalingGroupName}"
    aggregation_dimensions: [["ImageId"], ["InstanceId", "InstanceType"], []]
